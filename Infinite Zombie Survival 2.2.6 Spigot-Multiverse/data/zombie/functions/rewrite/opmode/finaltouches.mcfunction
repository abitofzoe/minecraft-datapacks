#setblock -195 4 51 minecraft:chest[facing=north,type=right]
execute if score IZr_system IZr_diffselected matches 1 run setblock -196 4 51 minecraft:chest[facing=north,type=right]{Items:[{Slot:0b,id:"minecraft:leather_helmet",Count:1b},{Slot:1b,id:"minecraft:leather_chestplate",Count:1b},{Slot:2b,id:"minecraft:leather_leggings",Count:1b},{Slot:3b,id:"minecraft:leather_boots",Count:1b},{Slot:4b,id:"minecraft:iron_sword",Count:1b},{Slot:5b,id:"minecraft:bow",Count:1b},{Slot:6b,id:"minecraft:arrow",Count:64b},{Slot:7b,id:"minecraft:apple",Count:16b},{Slot:8b,id:"minecraft:shield",Count:1b},{Slot:9b,id:"minecraft:leather_helmet",Count:1b},{Slot:10b,id:"minecraft:leather_chestplate",Count:11b},{Slot:11b,id:"minecraft:leather_leggings",Count:1b},{Slot:12b,id:"minecraft:leather_boots",Count:1b},{Slot:13b,id:"minecraft:iron_sword",Count:1b},{Slot:14b,id:"minecraft:bow",Count:1b},{Slot:15b,id:"minecraft:arrow",Count:64b},{Slot:16b,id:"minecraft:apple",Count:16b},{Slot:17b,id:"minecraft:shield",Count:1b},{Slot:18b,id:"minecraft:dirt",Count:64b},{Slot:19b,id:"minecraft:dirt",Count:64b},{Slot:20b,id:"minecraft:oak_sapling",Count:64b},{Slot:21b,id:"minecraft:oak_sapling",Count:64b},{Slot:22b,id:"minecraft:snow_block",Count:64b},{Slot:23b,id:"minecraft:snow_block",Count:64b},{Slot:24b,id:"minecraft:snow_block",Count:64b},{Slot:25b,id:"minecraft:snow_block",Count:64b}]}
execute if score IZr_system IZr_diffselected matches 2 run setblock -196 4 51 minecraft:chest[facing=north,type=right]{Items:[{Slot:0b,id:"minecraft:iron_helmet",Count:1b},{Slot:1b,id:"minecraft:iron_chestplate",Count:1b},{Slot:2b,id:"minecraft:iron_leggings",Count:1b},{Slot:3b,id:"minecraft:iron_boots",Count:1b},{Slot:4b,id:"minecraft:iron_sword",Count:1b},{Slot:5b,id:"minecraft:bow",Count:1b},{Slot:6b,id:"minecraft:arrow",Count:64b},{Slot:7b,id:"minecraft:bread",Count:16b},{Slot:8b,id:"minecraft:shield",Count:1b},{Slot:9b,id:"minecraft:iron_helmet",Count:1b},{Slot:10b,id:"minecraft:iron_chestplate",Count:11b},{Slot:11b,id:"minecraft:iron_leggings",Count:1b},{Slot:12b,id:"minecraft:iron_boots",Count:1b},{Slot:13b,id:"minecraft:iron_sword",Count:1b},{Slot:14b,id:"minecraft:bow",Count:1b},{Slot:15b,id:"minecraft:arrow",Count:64b},{Slot:16b,id:"minecraft:bread",Count:16b},{Slot:17b,id:"minecraft:shield",Count:1b},{Slot:18b,id:"minecraft:dirt",Count:64b},{Slot:19b,id:"minecraft:dirt",Count:64b},{Slot:20b,id:"minecraft:oak_sapling",Count:64b},{Slot:21b,id:"minecraft:oak_sapling",Count:64b},{Slot:22b,id:"minecraft:dirt",Count:64b},{Slot:23b,id:"minecraft:dirt",Count:64b},{Slot:24b,id:"minecraft:dirt",Count:64b},{Slot:25b,id:"minecraft:dirt",Count:64b},{Slot:26b,id:"minecraft:golden_apple",Count:4b}]}
execute if score IZr_system IZr_diffselected matches 3 run setblock -196 4 51 minecraft:chest[facing=north,type=right]{Items:[{Slot:0b,id:"minecraft:diamond_helmet",Count:1b},{Slot:1b,id:"minecraft:diamond_chestplate",Count:1b},{Slot:2b,id:"minecraft:diamond_leggings",Count:1b},{Slot:3b,id:"minecraft:diamond_boots",Count:1b},{Slot:4b,id:"minecraft:diamond_sword",Count:1b},{Slot:5b,id:"minecraft:bow",Count:1b},{Slot:6b,id:"minecraft:arrow",Count:64b},{Slot:7b,id:"minecraft:cooked_beef",Count:16b},{Slot:8b,id:"minecraft:shield",Count:1b,tag:{Enchantments:[{id:"minecraft:unbreaking",lvl:3}]}},{Slot:9b,id:"minecraft:diamond_helmet",Count:1b},{Slot:10b,id:"minecraft:diamond_chestplate",Count:11b},{Slot:11b,id:"minecraft:diamond_leggings",Count:1b},{Slot:12b,id:"minecraft:diamond_boots",Count:1b},{Slot:13b,id:"minecraft:diamond_sword",Count:1b},{Slot:14b,id:"minecraft:bow",Count:1b},{Slot:15b,id:"minecraft:arrow",Count:64b},{Slot:16b,id:"minecraft:cooked_beef",Count:16b},{Slot:17b,id:"minecraft:shield",Count:1b,tag:{Enchantments:[{id:"minecraft:unbreaking",lvl:3}]}},{Slot:18b,id:"minecraft:dirt",Count:64b},{Slot:19b,id:"minecraft:dirt",Count:64b},{Slot:20b,id:"minecraft:oak_sapling",Count:64b},{Slot:21b,id:"minecraft:oak_sapling",Count:64b},{Slot:22b,id:"minecraft:end_stone_bricks",Count:64b},{Slot:23b,id:"minecraft:end_stone_bricks",Count:64b},{Slot:24b,id:"minecraft:end_stone_bricks",Count:64b},{Slot:25b,id:"minecraft:end_stone_bricks",Count:64b},{Slot:26b,id:"minecraft:golden_apple",Count:8b}]}
execute if score IZr_system IZr_diffselected matches 4 run setblock -196 4 51 minecraft:chest[facing=north,type=right]{Items:[{Slot:0b,id:"minecraft:diamond_helmet",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:1b,id:"minecraft:diamond_chestplate",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:2b,id:"minecraft:diamond_leggings",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:3b,id:"minecraft:diamond_boots",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:4b,id:"minecraft:diamond_sword",Count:1b},{Slot:5b,id:"minecraft:crossbow",Count:1b,tag:{Enchantments:[{id:"minecraft:multishot",lvl:1},{id:"minecraft:quick_charge",lvl:3}]}},{Slot:6b,id:"minecraft:arrow",Count:64b},{Slot:7b,id:"minecraft:golden_carrot",Count:32b},{Slot:8b,id:"minecraft:shield",Count:1b,tag:{Enchantments:[{id:"minecraft:unbreaking",lvl:3}]}},{Slot:9b,id:"minecraft:diamond_helmet",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:10b,id:"minecraft:diamond_chestplate",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:11b,id:"minecraft:diamond_leggings",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:12b,id:"minecraft:diamond_boots",Count:1b,tag:{Enchantments:[{id:"minecraft:protection",lvl:4}]}},{Slot:13b,id:"minecraft:diamond_sword",Count:1b,tag:{Enchantments:[{id:"minecraft:sharpness",lvl:5},{id:"minecraft:sweeping_edge",lvl:3}]}},{Slot:14b,id:"minecraft:crossbow",Count:1b,tag:{Enchantments:[{id:"minecraft:multishot",lvl:1},{id:"minecraft:quick_charge",lvl:3}]}},{Slot:15b,id:"minecraft:arrow",Count:64b},{Slot:16b,id:"minecraft:golden_carrot",Count:32b},{Slot:17b,id:"minecraft:shield",Count:1b,tag:{Enchantments:[{id:"minecraft:unbreaking",lvl:3}]}},{Slot:18b,id:"minecraft:dirt",Count:64b},{Slot:19b,id:"minecraft:dirt",Count:64b},{Slot:20b,id:"minecraft:oak_sapling",Count:64b},{Slot:21b,id:"minecraft:oak_sapling",Count:64b},{Slot:22b,id:"minecraft:end_stone",Count:64b},{Slot:23b,id:"minecraft:end_stone",Count:64b},{Slot:24b,id:"minecraft:end_stone",Count:64b},{Slot:25b,id:"minecraft:end_stone",Count:64b},{Slot:26b,id:"minecraft:golden_apple",Count:16b},{Slot:27b,id:"minecraft:enchanted_golden_apple",Count:4b}]}

tp @a[tag=IZ_inminigame] -193.50 4 51.50 180 0

scoreboard players set IZr_system IZr_opmode 9

bossbar remove minecraft:izr_waveprogress

bossbar add izr_waveprogress {"text":"Wave Progress","color":"yellow"}
bossbar set minecraft:izr_waveprogress color yellow
bossbar set minecraft:izr_waveprogress max 100
bossbar set minecraft:izr_waveprogress style progress
bossbar set minecraft:izr_waveprogress visible true 

bossbar add izr_boss1 {"text":"Giant Zombie","color":"red"}
bossbar set minecraft:izr_boss1 color red
bossbar set minecraft:izr_boss1 max 200
bossbar set minecraft:izr_boss1 style progress
bossbar set minecraft:izr_boss1 visible false 

bossbar add izr_boss2 {"text":"Giant Zombie","color":"red"}
bossbar set minecraft:izr_boss2 color red
bossbar set minecraft:izr_boss2 max 200
bossbar set minecraft:izr_boss2 style progress
bossbar set minecraft:izr_boss2 visible false 

bossbar add izr_boss3 {"text":"Giant Zombie","color":"red"}
bossbar set minecraft:izr_boss3 color red
bossbar set minecraft:izr_boss3 max 200
bossbar set minecraft:izr_boss3 style progress
bossbar set minecraft:izr_boss3 visible false 

bossbar add izr_boss4 {"text":"Giant Zombie","color":"red"}
bossbar set minecraft:izr_boss4 color red
bossbar set minecraft:izr_boss4 max 200
bossbar set minecraft:izr_boss4 style progress
bossbar set minecraft:izr_boss4 visible false 

bossbar add izr_resourceconverter {"text":"Resource Converter","color":"red"}
bossbar set minecraft:izr_resourceconverter color red
bossbar set minecraft:izr_resourceconverter max 20
bossbar set minecraft:izr_resourceconverter style notched_20
bossbar set minecraft:izr_resourceconverter visible true 

bossbar add izr_blocktrader {"text":"Block Trader","color":"red"}
bossbar set minecraft:izr_blocktrader color red
bossbar set minecraft:izr_blocktrader max 20
bossbar set minecraft:izr_blocktrader style notched_20
bossbar set minecraft:izr_blocktrader visible true 

bossbar add izr_weaponsexpert {"text":"Weapons Expert","color":"red"}
bossbar set minecraft:izr_weaponsexpert color red
bossbar set minecraft:izr_weaponsexpert max 20
bossbar set minecraft:izr_weaponsexpert style notched_20
bossbar set minecraft:izr_weaponsexpert visible true 

bossbar add izr_foodmerchant {"text":"Food Merchant","color":"red"}
bossbar set minecraft:izr_foodmerchant color red
bossbar set minecraft:izr_foodmerchant max 20
bossbar set minecraft:izr_foodmerchant style notched_20
bossbar set minecraft:izr_foodmerchant visible true 

scoreboard players set IZr_system IZr_bosswave 0
scoreboard players set IZr_system IZr_bosswaverng 0
scoreboard players set IZr_system IZr_queuedboss 0

scoreboard players set IZr_system IZr_cspawnlimit 2
scoreboard players set IZr_system IZr_bzombies 5
scoreboard players set IZr_system IZr_czombies 0
scoreboard players set IZr_system IZr_sectionsopen 1
scoreboard players set IZr_system IZr_waveprog 0
scoreboard players set IZr_system IZr_wavemode 1
scoreboard players set IZr_system IZr_currentwave 1

execute if score IZr_system IZr_diffselected matches 3.. run scoreboard players add IZr_system IZr_cspawnlimit 1
execute if score IZr_system IZr_diffselected matches 3.. run scoreboard players add IZr_system IZr_bzombies 2

scoreboard players operation IZr_system IZr_rzombies = IZr_system IZr_bzombies

scoreboard players operation IZr_system IZr_inter1 = @e[type=armor_stand,tag=IZ_inminigame,tag=IZr_rng,scores={IZr_rng=4..6},limit=1,sort=random] IZr_rng
scoreboard players operation IZr_system IZr_inter2 = @e[type=armor_stand,tag=IZ_inminigame,tag=IZr_rng,scores={IZr_rng=3..4},limit=1,sort=random] IZr_rng
scoreboard players operation IZr_system IZr_inter3 = @e[type=armor_stand,tag=IZ_inminigame,tag=IZr_rng,scores={IZr_rng=1..2},limit=1,sort=random] IZr_rng
scoreboard players operation IZr_system IZr_inter4 = @e[type=armor_stand,tag=IZ_inminigame,tag=IZr_rng,scores={IZr_rng=3..5},limit=1,sort=random] IZr_rng

scoreboard players operation IZr_system IZr_inter4 += IZr_system IZr_inter3
scoreboard players operation IZr_system IZr_inter4 += IZr_system IZr_inter2
scoreboard players operation IZr_system IZr_inter4 += IZr_system IZr_inter1

scoreboard players operation IZr_system IZr_inter3 += IZr_system IZr_inter2
scoreboard players operation IZr_system IZr_inter3 += IZr_system IZr_inter1

scoreboard players operation IZr_system IZr_inter2 += IZr_system IZr_inter1

execute unless score IZr_system IZr_diffselected matches 2.. run scoreboard players set IZr_system IZr_inter1 -1
execute unless score IZr_system IZr_diffselected matches 3.. run scoreboard players set IZr_system IZr_inter2 -1
execute unless score IZr_system IZr_diffselected matches 3.. run scoreboard players set IZr_system IZr_inter3 -1
execute unless score IZr_system IZr_diffselected matches 4.. run scoreboard players set IZr_system IZr_inter4 -1


function zombie:rewrite/opmode/gameloop/rng/breaker
function zombie:rewrite/opmode/gameloop/rng/creeper
function zombie:rewrite/opmode/gameloop/rng/skeleton
function zombie:rewrite/opmode/gameloop/rng/zombie

execute in minecraft:izs run kill @e[type=item,x=0]

gamemode survival @a[tag=IZ_inminigame]

#No boss for the first 5 waves
scoreboard players set IZr_system IZr_lastbosswave 4